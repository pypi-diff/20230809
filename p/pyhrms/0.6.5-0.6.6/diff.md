# Comparing `tmp/pyhrms-0.6.5.zip` & `tmp/pyhrms-0.6.6.zip`

## zipinfo {}

```diff
@@ -1,17 +1,17 @@
-Zip file size: 81393 bytes, number of entries: 15
-drwxrwxrwx  2.0 fat        0 b- stor 23-Jul-27 07:37 pyhrms-0.6.5/
-drwxrwxrwx  2.0 fat        0 b- stor 23-Jul-27 07:37 pyhrms-0.6.5/pyhrms/
-drwxrwxrwx  2.0 fat        0 b- stor 23-Jul-27 07:37 pyhrms-0.6.5/pyhrms.egg-info/
--rw-rw-rw-  2.0 fat     1088 b- defN 21-Nov-11 20:05 pyhrms-0.6.5/License.txt
--rw-rw-rw-  2.0 fat    23697 b- defN 23-Jul-27 07:37 pyhrms-0.6.5/PKG-INFO
--rw-rw-rw-  2.0 fat    22773 b- defN 23-Jul-27 07:36 pyhrms-0.6.5/README.rst
--rw-rw-rw-  2.0 fat       42 b- defN 23-Jul-27 07:37 pyhrms-0.6.5/setup.cfg
--rw-rw-rw-  2.0 fat      919 b- defN 23-Jul-27 07:36 pyhrms-0.6.5/setup.py
--rw-rw-rw-  2.0 fat   239439 b- defN 23-Jul-26 14:55 pyhrms-0.6.5/pyhrms/pyhrms.py
--rw-rw-rw-  2.0 fat     1526 b- defN 23-Jul-27 07:35 pyhrms-0.6.5/pyhrms/__init__.py
--rw-rw-rw-  2.0 fat        1 b- defN 23-Jul-27 07:37 pyhrms-0.6.5/pyhrms.egg-info/dependency_links.txt
--rw-rw-rw-  2.0 fat    23697 b- defN 23-Jul-27 07:37 pyhrms-0.6.5/pyhrms.egg-info/PKG-INFO
--rw-rw-rw-  2.0 fat      173 b- defN 23-Jul-27 07:37 pyhrms-0.6.5/pyhrms.egg-info/requires.txt
--rw-rw-rw-  2.0 fat      216 b- defN 23-Jul-27 07:37 pyhrms-0.6.5/pyhrms.egg-info/SOURCES.txt
--rw-rw-rw-  2.0 fat        7 b- defN 23-Jul-27 07:37 pyhrms-0.6.5/pyhrms.egg-info/top_level.txt
-15 files, 313578 bytes uncompressed, 79347 bytes compressed:  74.7%
+Zip file size: 81969 bytes, number of entries: 15
+drwxrwxrwx  2.0 fat        0 b- stor 23-Aug-09 07:45 pyhrms-0.6.6/
+drwxrwxrwx  2.0 fat        0 b- stor 23-Aug-09 07:45 pyhrms-0.6.6/pyhrms/
+drwxrwxrwx  2.0 fat        0 b- stor 23-Aug-09 07:45 pyhrms-0.6.6/pyhrms.egg-info/
+-rw-rw-rw-  2.0 fat     1088 b- defN 21-Nov-11 20:05 pyhrms-0.6.6/License.txt
+-rw-rw-rw-  2.0 fat    23705 b- defN 23-Aug-09 07:45 pyhrms-0.6.6/PKG-INFO
+-rw-rw-rw-  2.0 fat    22780 b- defN 23-Aug-09 07:41 pyhrms-0.6.6/README.rst
+-rw-rw-rw-  2.0 fat       42 b- defN 23-Aug-09 07:45 pyhrms-0.6.6/setup.cfg
+-rw-rw-rw-  2.0 fat      919 b- defN 23-Aug-09 07:41 pyhrms-0.6.6/setup.py
+-rw-rw-rw-  2.0 fat   240711 b- defN 23-Aug-09 07:30 pyhrms-0.6.6/pyhrms/pyhrms.py
+-rw-rw-rw-  2.0 fat     1551 b- defN 23-Aug-09 07:43 pyhrms-0.6.6/pyhrms/__init__.py
+-rw-rw-rw-  2.0 fat        1 b- defN 23-Aug-09 07:45 pyhrms-0.6.6/pyhrms.egg-info/dependency_links.txt
+-rw-rw-rw-  2.0 fat    23705 b- defN 23-Aug-09 07:45 pyhrms-0.6.6/pyhrms.egg-info/PKG-INFO
+-rw-rw-rw-  2.0 fat      173 b- defN 23-Aug-09 07:45 pyhrms-0.6.6/pyhrms.egg-info/requires.txt
+-rw-rw-rw-  2.0 fat      216 b- defN 23-Aug-09 07:45 pyhrms-0.6.6/pyhrms.egg-info/SOURCES.txt
+-rw-rw-rw-  2.0 fat        7 b- defN 23-Aug-09 07:45 pyhrms-0.6.6/pyhrms.egg-info/top_level.txt
+15 files, 314898 bytes uncompressed, 79923 bytes compressed:  74.6%
```

## zipnote {}

```diff
@@ -1,46 +1,46 @@
-Filename: pyhrms-0.6.5/
+Filename: pyhrms-0.6.6/
 Comment: 
 
-Filename: pyhrms-0.6.5/pyhrms/
+Filename: pyhrms-0.6.6/pyhrms/
 Comment: 
 
-Filename: pyhrms-0.6.5/pyhrms.egg-info/
+Filename: pyhrms-0.6.6/pyhrms.egg-info/
 Comment: 
 
-Filename: pyhrms-0.6.5/License.txt
+Filename: pyhrms-0.6.6/License.txt
 Comment: 
 
-Filename: pyhrms-0.6.5/PKG-INFO
+Filename: pyhrms-0.6.6/PKG-INFO
 Comment: 
 
-Filename: pyhrms-0.6.5/README.rst
+Filename: pyhrms-0.6.6/README.rst
 Comment: 
 
-Filename: pyhrms-0.6.5/setup.cfg
+Filename: pyhrms-0.6.6/setup.cfg
 Comment: 
 
-Filename: pyhrms-0.6.5/setup.py
+Filename: pyhrms-0.6.6/setup.py
 Comment: 
 
-Filename: pyhrms-0.6.5/pyhrms/pyhrms.py
+Filename: pyhrms-0.6.6/pyhrms/pyhrms.py
 Comment: 
 
-Filename: pyhrms-0.6.5/pyhrms/__init__.py
+Filename: pyhrms-0.6.6/pyhrms/__init__.py
 Comment: 
 
-Filename: pyhrms-0.6.5/pyhrms.egg-info/dependency_links.txt
+Filename: pyhrms-0.6.6/pyhrms.egg-info/dependency_links.txt
 Comment: 
 
-Filename: pyhrms-0.6.5/pyhrms.egg-info/PKG-INFO
+Filename: pyhrms-0.6.6/pyhrms.egg-info/PKG-INFO
 Comment: 
 
-Filename: pyhrms-0.6.5/pyhrms.egg-info/requires.txt
+Filename: pyhrms-0.6.6/pyhrms.egg-info/requires.txt
 Comment: 
 
-Filename: pyhrms-0.6.5/pyhrms.egg-info/SOURCES.txt
+Filename: pyhrms-0.6.6/pyhrms.egg-info/SOURCES.txt
 Comment: 
 
-Filename: pyhrms-0.6.5/pyhrms.egg-info/top_level.txt
+Filename: pyhrms-0.6.6/pyhrms.egg-info/top_level.txt
 Comment: 
 
 Zip file comment:
```

## Comparing `pyhrms-0.6.5/License.txt` & `pyhrms-0.6.6/License.txt`

 * *Files identical despite different names*

## Comparing `pyhrms-0.6.5/PKG-INFO` & `pyhrms-0.6.6/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pyhrms
-Version: 0.6.5
+Version: 0.6.6
 Summary: A powerful GC/LC-HRMS data analysis tool
 Home-page: https://github.com/WangRui5/PyHRMS.git
 Author: Wang Rui
 Author-email: wtrt7009@gmail.com
 License: UNKNOWN
 Platform: UNKNOWN
 Classifier: Programming Language :: Python :: 3
@@ -22,17 +22,17 @@
 
 Contributer: Rui Wang
 ======================
 First release date: Nov.15.2021
 
 Update
 ======
-July.27.2023: pyhrms 0.6.5 new features:
+Aug.9.2023: pyhrms 0.6.6 new features:
 
-    * Added ion mobility data processing functions
+    * Added get_chinese_name function
 
 
 pyhrms can be installed and import as following:
 
 .. code-block:: python
 
     pip install pyhrms
@@ -211,14 +211,15 @@
   |- extract_tic
   |- ms_bg_removal
   |- JsonToExcel
   |- suspect_list_matching
   |- rename_files
   |- Calibration
   |- get_frag_DIA
+  |- get_chinese_name
   |- AIF_multi_ce
   |- pubchem_search
   |- draw_pie_chart
 
 
 
 Table of Content
```

## Comparing `pyhrms-0.6.5/README.rst` & `pyhrms-0.6.6/README.rst`

 * *Files 0% similar despite different names*

```diff
@@ -7,17 +7,17 @@
 
 Contributer: Rui Wang
 ======================
 First release date: Nov.15.2021
 
 Update
 ======
-July.27.2023: pyhrms 0.6.5 new features:
+Aug.9.2023: pyhrms 0.6.6 new features:
 
-    * Added ion mobility data processing functions
+    * Added get_chinese_name function
 
 
 pyhrms can be installed and import as following:
 
 .. code-block:: python
 
     pip install pyhrms
@@ -196,14 +196,15 @@
   |- extract_tic
   |- ms_bg_removal
   |- JsonToExcel
   |- suspect_list_matching
   |- rename_files
   |- Calibration
   |- get_frag_DIA
+  |- get_chinese_name
   |- AIF_multi_ce
   |- pubchem_search
   |- draw_pie_chart
 
 
 
 Table of Content
```

## Comparing `pyhrms-0.6.5/setup.py` & `pyhrms-0.6.6/setup.py`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 
 def readme_file():
     with open('README.rst') as rf:
         return rf.read()
 
 setuptools.setup(
     name = 'pyhrms',
-    version = '0.6.5',
+    version = '0.6.6',
     author = 'Wang Rui',
     author_email = 'wtrt7009@gmail.com',
     url = 'https://github.com/WangRui5/PyHRMS.git',
     description = 'A powerful GC/LC-HRMS data analysis tool',
     long_description = readme_file(),
     packages = setuptools.find_packages(),
     install_requires = ['numpy>=1.19.2','pandas>=1.3.3'
```

## Comparing `pyhrms-0.6.5/pyhrms/pyhrms.py` & `pyhrms-0.6.6/pyhrms/pyhrms.py`

 * *Files 0% similar despite different names*

```diff
@@ -18,18 +18,19 @@
 from sklearn.decomposition import PCA
 from sklearn import preprocessing
 import scipy.stats as st
 from scipy import integrate
 import itertools
 import bisect
 import re
-from pyopenms import MSExperiment, MzMLFile
 from collections import defaultdict
 
 
+
+
 """
 ========================================================================================================
 1. basic function
 ========================================================================================================
 """
 
 atom_mass_table = pd.Series(
@@ -450,15 +451,15 @@
         
 def sep_scans(path, company, tool = 'pymzml'):
     """
     Separates scans for MS1 and MS2 in mzML files using pymzml package.
     Args:
        path (str): The path of the mzML file.
        company (str): The instrument company name. Currently, supports 'Waters', 'Agilent', 'Thermo' or 'AB'.
-       tool(str): pymzml or pyopenms
+       tool(str): pymzml or pyopenms, if select pyopenms, make sure you have install it and import properly：from pyopenms import MSExperiment, MzMLFile
     Returns:
         Tuple: A tuple of two lists containing MS1 and MS2 scans respectively.
     """
     if tool == 'pymzml':
         if company.lower() == 'waters':
             # create a pymzml Reader object
             run = pymzml.run.Reader(path)
@@ -3336,15 +3337,15 @@
         for file in name_files:
             file_name1 = os.path.basename(file)
             print(f'     * reading file: {file_name1}')
             df = pd.read_excel(file, index_col='Unnamed: 0')
             name_data.append(df)
         name_s = pd.concat(name_data, axis=1).mean(axis=1)
         final_result.append(name_s)
-    data = pd.concat(final_result, axis=1).astype(int)
+    data = pd.concat(final_result, axis=1).fillna(1).astype(int)
     data.columns = names
     return data
 
 
 def omics_index_dict(path, all_new_index, names, rt_threshold=0.1, mz_threshold=0.015):
     """
     Given a list of new_index values, this function checks if each value corresponds to a pair of
@@ -3968,14 +3969,17 @@
 ========================================================================================================
 5. Ion mobility data processing
 ========================================================================================================
 """
 def first_step_for_IMS(path,mz_range = [50,2000],company = 'Waters',profile = True,lock_mass = 556.2771,ms2_analysis = True,frag_rt_error = 0.05,dft_error = 0.5,
                        split_n = 20,long_rt_split_n = 5,rt_overlap = 1, mz_overlap = 1,noise_threshold = 0, threshold=15, i_threshold=200,
                        SN_threshold=3, rt_error_alignment=0.1,mz_error_alignment=0.015, sat_intensity = False):
+    """
+    if select IMS, make sure you have install pyopenms and import properly：from pyopenms import MSExperiment, MzMLFile
+    """
     
     files = glob(os.path.join(path,'*.mzML'))
     for file in files:
         # 1. 先分离，获得ms1，ms2和lockspray
         ms1,ms2,lockspray = sep_scans(file,company,tool = 'pyopenms')
         # 2. 获得矫正数据factor
         mz_corr_factors = []
@@ -3990,15 +3994,15 @@
 
         # 3. 开始处理ms1
         peak_all1 = peak_picking_ion_mobility_DIA1(ms1,mz_range = mz_range,profile = profile,split_n = split_n,long_rt_split_n = long_rt_split_n,
                                  rt_overlap = rt_overlap, mz_overlap = mz_overlap,noise_threshold = noise_threshold, threshold=threshold, i_threshold=i_threshold, SN_threshold=SN_threshold,
                                  rt_error_alignment=rt_error_alignment,mz_error_alignment=mz_error_alignment, factor = factor)
 
         # 4. 开始处理ms2
-        if (len(ms2) ==0)|(ms2_analysis==ms2_analysis) :
+        if (len(ms2) ==0)|(ms2_analysis== False):
             pass
         else:
             peak_all2 = peak_picking_ion_mobility_DIA1(ms2,mz_range = mz_range,profile = profile,split_n = split_n,long_rt_split_n = long_rt_split_n,
                                      rt_overlap = rt_overlap, mz_overlap = mz_overlap,noise_threshold = noise_threshold, threshold=threshold, i_threshold=i_threshold, SN_threshold=SN_threshold,
                                      rt_error_alignment=rt_error_alignment,mz_error_alignment=mz_error_alignment, factor = factor)
 
 
@@ -4968,14 +4972,51 @@
                 # start to fill the result
                 df.loc[i, 'name'] = first_name
                 df.loc[i, 'formula'] = new_formula
                 df.loc[i, 'Smile'] = new_smi
                 df.loc[i, 'CAS'] = cas_number
     return df
 
+def get_chinese_name(name: str) -> str:
+    """
+    Get the Chinese name of a chemical compound given its CAS number.Please also make sure you have installed the following package:
+    import requests
+    from bs4 import BeautifulSoup
+
+    Args:
+    - name (str): The CAS number of the compound.
+
+    Returns:
+    - str: The Chinese name of the compound or an empty string if not found.
+    """
+    url = f"https://www.chemicalbook.com/Search.aspx?keyword={name}"
+
+    response = requests.get(url)
+
+    # Check if the request was successful
+    if response.status_code != 200:
+        print(f"Failed to fetch the webpage. Status code: {response.status_code}")
+        return ""
+
+    page_content = response.text
+    soup = BeautifulSoup(page_content, 'html.parser')
+
+    # Find the td containing '中文名称'
+    name_label = soup.find('td', text='中文名称：')
+    
+    if name_label:
+        chinese_name_tag = name_label.find_next_sibling('td')
+        if chinese_name_tag:
+            return chinese_name_tag.get_text().strip()
+
+    return ""
+
+
+
+
 
 def AIF_multi_ce(path, company='Agilent', profile=False, control_group=['Methanol'], collision_energies=[10, 20, 40],
                  filter_type=1, frag_rt_error=0.02, split_n=20,
                  sat_intensity=False, long_rt_split_n=1, threshold=15, i_threshold=500, SN_threshold=3, orbi = False):
     """
     Processes AIF data when multiple collision energies are present.
```

## Comparing `pyhrms-0.6.5/pyhrms/__init__.py` & `pyhrms-0.6.6/pyhrms/__init__.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 from . import pyhrms
 
-__version__ = "0.6.5"
+__version__ = "0.6.6"
 
 __all__ = [
     "sep_scans",
     "gen_df",
     "peak_picking",
     "split_peak_picking",
     "remove_unnamed_columns",
@@ -55,13 +55,14 @@
     "Calibration",
     "final_result_filter",
     "update_category",
     "fold_change_filter",
     "get_frag_DIA",
     "AIF_multi_ce",
     "pubchem_search",
+    "get_chinese_name",
     "draw_pie_chart",
     "first_step_for_IMS",
     "peak_picking_ion_mobility_DIA1",
     "split_peak_picking2"
     
 ]
```

## Comparing `pyhrms-0.6.5/pyhrms.egg-info/PKG-INFO` & `pyhrms-0.6.6/pyhrms.egg-info/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pyhrms
-Version: 0.6.5
+Version: 0.6.6
 Summary: A powerful GC/LC-HRMS data analysis tool
 Home-page: https://github.com/WangRui5/PyHRMS.git
 Author: Wang Rui
 Author-email: wtrt7009@gmail.com
 License: UNKNOWN
 Platform: UNKNOWN
 Classifier: Programming Language :: Python :: 3
@@ -22,17 +22,17 @@
 
 Contributer: Rui Wang
 ======================
 First release date: Nov.15.2021
 
 Update
 ======
-July.27.2023: pyhrms 0.6.5 new features:
+Aug.9.2023: pyhrms 0.6.6 new features:
 
-    * Added ion mobility data processing functions
+    * Added get_chinese_name function
 
 
 pyhrms can be installed and import as following:
 
 .. code-block:: python
 
     pip install pyhrms
@@ -211,14 +211,15 @@
   |- extract_tic
   |- ms_bg_removal
   |- JsonToExcel
   |- suspect_list_matching
   |- rename_files
   |- Calibration
   |- get_frag_DIA
+  |- get_chinese_name
   |- AIF_multi_ce
   |- pubchem_search
   |- draw_pie_chart
 
 
 
 Table of Content
```

