# Comparing `tmp/xnat4tests-0.3.6-py3-none-any.whl.zip` & `tmp/xnat4tests-0.3.7-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,24 +1,24 @@
-Zip file size: 20335 bytes, number of entries: 22
--rw-r--r--  2.0 unx      243 b- defN 23-Apr-12 03:38 xnat4tests/__init__.py
--rw-r--r--  2.0 unx      498 b- defN 23-Apr-12 03:39 xnat4tests/_version.py
--rw-r--r--  2.0 unx     8596 b- defN 23-Apr-12 03:38 xnat4tests/base.py
--rw-r--r--  2.0 unx     4729 b- defN 23-Apr-12 03:38 xnat4tests/cli.py
--rw-r--r--  2.0 unx     5488 b- defN 23-Apr-12 03:38 xnat4tests/config.py
--rw-r--r--  2.0 unx     6614 b- defN 23-Apr-12 03:38 xnat4tests/data.py
--rw-r--r--  2.0 unx     1564 b- defN 23-Apr-12 03:38 xnat4tests/registry.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 03:38 xnat4tests/testing.py
--rw-r--r--  2.0 unx      494 b- defN 23-Apr-12 03:38 xnat4tests/utils.py
--rw-r--r--  2.0 unx     3137 b- defN 23-Apr-12 03:38 xnat4tests/docker-src/Dockerfile
--rw-r--r--  2.0 unx      100 b- defN 23-Apr-12 03:38 xnat4tests/docker-src/XNAT.sql
--rwxr-xr-x  2.0 unx      288 b- defN 23-Apr-12 03:38 xnat4tests/docker-src/launch-xnat.sh
--rwxr-xr-x  2.0 unx      501 b- defN 23-Apr-12 03:38 xnat4tests/docker-src/make-xnat-config.sh
--rw-r--r--  2.0 unx     1008 b- defN 23-Apr-12 03:38 xnat4tests/docker-src/postfix-start
--rw-r--r--  2.0 unx      452 b- defN 23-Apr-12 03:38 xnat4tests/docker-src/supervisord.conf
--rw-r--r--  2.0 unx      566 b- defN 23-Apr-12 03:38 xnat4tests/docker-src/xnat-prefs-init.ini
--rw-r--r--  2.0 unx     6383 b- defN 23-Apr-12 03:39 xnat4tests-0.3.6.dist-info/LICENSE
--rw-r--r--  2.0 unx     6799 b- defN 23-Apr-12 03:39 xnat4tests-0.3.6.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-12 03:39 xnat4tests-0.3.6.dist-info/WHEEL
--rw-r--r--  2.0 unx       75 b- defN 23-Apr-12 03:39 xnat4tests-0.3.6.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       11 b- defN 23-Apr-12 03:39 xnat4tests-0.3.6.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1832 b- defN 23-Apr-12 03:39 xnat4tests-0.3.6.dist-info/RECORD
-22 files, 49470 bytes uncompressed, 17343 bytes compressed:  64.9%
+Zip file size: 20674 bytes, number of entries: 22
+-rw-r--r--  2.0 unx      243 b- defN 23-Aug-08 13:27 xnat4tests/__init__.py
+-rw-r--r--  2.0 unx      498 b- defN 23-Aug-08 13:28 xnat4tests/_version.py
+-rw-r--r--  2.0 unx     8596 b- defN 23-Aug-08 13:27 xnat4tests/base.py
+-rw-r--r--  2.0 unx     4729 b- defN 23-Aug-08 13:27 xnat4tests/cli.py
+-rw-r--r--  2.0 unx     5501 b- defN 23-Aug-08 13:27 xnat4tests/config.py
+-rw-r--r--  2.0 unx     8915 b- defN 23-Aug-08 13:27 xnat4tests/data.py
+-rw-r--r--  2.0 unx     1564 b- defN 23-Aug-08 13:27 xnat4tests/registry.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Aug-08 13:27 xnat4tests/testing.py
+-rw-r--r--  2.0 unx      494 b- defN 23-Aug-08 13:27 xnat4tests/utils.py
+-rw-r--r--  2.0 unx     3137 b- defN 23-Aug-08 13:27 xnat4tests/docker-src/Dockerfile
+-rw-r--r--  2.0 unx      100 b- defN 23-Aug-08 13:27 xnat4tests/docker-src/XNAT.sql
+-rwxr-xr-x  2.0 unx      288 b- defN 23-Aug-08 13:27 xnat4tests/docker-src/launch-xnat.sh
+-rwxr-xr-x  2.0 unx      501 b- defN 23-Aug-08 13:27 xnat4tests/docker-src/make-xnat-config.sh
+-rw-r--r--  2.0 unx     1008 b- defN 23-Aug-08 13:27 xnat4tests/docker-src/postfix-start
+-rw-r--r--  2.0 unx      452 b- defN 23-Aug-08 13:27 xnat4tests/docker-src/supervisord.conf
+-rw-r--r--  2.0 unx      566 b- defN 23-Aug-08 13:27 xnat4tests/docker-src/xnat-prefs-init.ini
+-rw-r--r--  2.0 unx     6383 b- defN 23-Aug-08 13:28 xnat4tests-0.3.7.dist-info/LICENSE
+-rw-r--r--  2.0 unx     6783 b- defN 23-Aug-08 13:28 xnat4tests-0.3.7.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Aug-08 13:28 xnat4tests-0.3.7.dist-info/WHEEL
+-rw-r--r--  2.0 unx       75 b- defN 23-Aug-08 13:28 xnat4tests-0.3.7.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       11 b- defN 23-Aug-08 13:28 xnat4tests-0.3.7.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1832 b- defN 23-Aug-08 13:28 xnat4tests-0.3.7.dist-info/RECORD
+22 files, 51768 bytes uncompressed, 17682 bytes compressed:  65.8%
```

## zipnote {}

```diff
@@ -42,26 +42,26 @@
 
 Filename: xnat4tests/docker-src/supervisord.conf
 Comment: 
 
 Filename: xnat4tests/docker-src/xnat-prefs-init.ini
 Comment: 
 
-Filename: xnat4tests-0.3.6.dist-info/LICENSE
+Filename: xnat4tests-0.3.7.dist-info/LICENSE
 Comment: 
 
-Filename: xnat4tests-0.3.6.dist-info/METADATA
+Filename: xnat4tests-0.3.7.dist-info/METADATA
 Comment: 
 
-Filename: xnat4tests-0.3.6.dist-info/WHEEL
+Filename: xnat4tests-0.3.7.dist-info/WHEEL
 Comment: 
 
-Filename: xnat4tests-0.3.6.dist-info/entry_points.txt
+Filename: xnat4tests-0.3.7.dist-info/entry_points.txt
 Comment: 
 
-Filename: xnat4tests-0.3.6.dist-info/top_level.txt
+Filename: xnat4tests-0.3.7.dist-info/top_level.txt
 Comment: 
 
-Filename: xnat4tests-0.3.6.dist-info/RECORD
+Filename: xnat4tests-0.3.7.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## xnat4tests/_version.py

```diff
@@ -4,18 +4,18 @@
 # unpacked source archive. Distribution tarballs contain a pre-generated copy
 # of this file.
 
 import json
 
 version_json = '''
 {
- "date": "2023-04-12T13:38:22+1000",
+ "date": "2023-08-08T23:27:21+1000",
  "dirty": false,
  "error": null,
- "full-revisionid": "e2c6b2e155bee08e7cab32d46577dda4efebc605",
- "version": "v0.3.6"
+ "full-revisionid": "5dc6f65392624f7dbd1d04be66393eaa5d1843dc",
+ "version": "v0.3.7"
 }
 '''  # END VERSION_JSON
 
 
 def get_versions():
     return json.loads(version_json)
```

## xnat4tests/config.py

```diff
@@ -44,15 +44,15 @@
     # xnat_user: str = "admin"
     # xnat_password: str = "admin"
     connection_attempts: int = 20
     connection_attempt_sleep: int = 5
     build_args: BuildArgs = attrs.field(
         factory=dict, converter=lambda d: BuildArgs(**d)
     )
-    loaded_from: Path = None
+    loaded_from: ty.Optional[Path] = None
 
     # These are fixed at the defaults for now. In future we might want to
     # have these set in the configuration
     xnat_user = "admin"
     xnat_password = "admin"
 
     @xnat_port.validator
```

## xnat4tests/data.py

```diff
@@ -11,20 +11,21 @@
 )
 from medimages4tests.dummy.dicom.mri.dwi.siemens.skyra.syngo_d13c import (
     get_image as dwi_syngo,
 )
 from medimages4tests.dummy.dicom.mri.fmap.siemens.skyra.syngo_d13c import (
     get_image as fmap_syngo,
 )
+from medimages4tests.mri.neuro.t1w import get_image as openneuro_t1w
 from .base import connect
 from .config import Config
 from .utils import logger
 
 
-AVAILABLE_DATASETS = ["dummydicom", "user-training"]
+AVAILABLE_DATASETS = ["dummydicom", "user-training", "openneuro-t1w"]
 
 
 @contextmanager
 def set_cwd(path):
     """Sets the current working directory to `path` and back to original
     working directory on exit
 
@@ -68,14 +69,31 @@
             [t1w_syngo(), dwi_syngo(), fmap_syngo()],
             config,
             project_id="dummydicomproject",
             subject_id="dummydicomsubject",
             session_id="dummydicomsession",
         )
 
+    elif dataset == "openneuro-t1w":
+
+        _upload_directly(
+            {"t1w": openneuro_t1w()},
+            config,
+            project_id="OPENNEURO_T1W",
+            subject_id="subject01",
+            session_id="subject01_MR01",
+        )
+        _upload_directly(
+            {"t1w": openneuro_t1w()},
+            config,
+            project_id="OPENNEURO_T1W",
+            subject_id="subject02",
+            session_id="subject02_MR01",
+        )
+
     elif dataset == "user-training":
 
         _upload_dicom_data(
             [t1w_syngo(), fmap_syngo()],
             config,
             project_id="TRAINING",
             subject_id="CONT01",
@@ -228,7 +246,62 @@
                 method="post",
             )
         experiment_id = login.projects[project_id].experiments[session_id].id
         # Pull headers and create OHIF headers
         # login.put(f"/data/experiments/{experiment_id}?pullDataFromHeaders=true")
         # login.put(f"/data/experiments/{experiment_id}?fixScanTypes=true")
         login.put(f"/data/experiments/{experiment_id}?triggerPipelines=true")
+
+
+def _upload_directly(
+    to_upload: ty.Dict[str, Path],
+    config: dict,
+    project_id: str,
+    subject_id: str,
+    session_id: str,
+):
+
+    with connect(config) as login:
+
+        project_uri = f"/data/archive/projects/{project_id}"
+
+        try:
+            login.get(project_uri)
+        except XNATResponseError:
+            login.put(project_uri)
+        else:
+            logger.debug(
+                "'%s' project already exists in test XNAT, skipping add data project",
+                project_id,
+            )
+
+        # Create subject
+        query = {
+            "xsiType": "xnat:subjectData",
+            "req_format": "qs",
+            "xnat:subjectData/label": subject_id,
+        }
+        login.put(f"{project_uri}/subjects/{subject_id}", query=query)
+
+        xproject = login.projects[project_id]
+
+        try:
+            xsession = login.get(
+                f"{project_uri}/subjects/{subject_id}/experiments/{session_id}"
+            )
+        except XNATResponseError:
+            xsubject = login.classes.SubjectData(label=subject_id, parent=xproject)
+            xsession = login.classes.MrSessionData(label=session_id, parent=xsubject)
+        else:
+            logger.info(
+                "'%s' session in '%s' project already exists in test XNAT, skipping",
+                session_id,
+                project_id,
+            )
+            return
+
+        for i, (scan_type, fspath) in enumerate(to_upload.items(), start=1):
+            xdataset = login.classes.MrScanData(id=i, type=scan_type, parent=xsession)
+            resource = xdataset.create_resource(
+                "NIFTI"
+            )  # TODO get this resource name from somewhere else
+            resource.upload_dir(fspath.parent, method="tar_file")
```

## Comparing `xnat4tests-0.3.6.dist-info/LICENSE` & `xnat4tests-0.3.7.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `xnat4tests-0.3.6.dist-info/METADATA` & `xnat4tests-0.3.7.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: xnat4tests
-Version: 0.3.6
+Version: 0.3.7
 Summary: Creates basic XNAT instance for API tests
 Home-page: https://github.com/australian-imaging-service/xnat4tests
 Author: Thomas G. Close
 Author-email: tom.g.close@gmail.com
 License: CC0
 Keywords: repository analysis neuroimaging workflows pipelines
 Classifier: Development Status :: 4 - Beta
@@ -15,23 +15,23 @@
 Classifier: Topic :: Scientific/Engineering :: Bio-Informatics
 Classifier: Topic :: Scientific/Engineering :: Medical Science Apps.
 Classifier: Programming Language :: Python :: 3.7
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 License-File: LICENSE
-Requires-Dist: docker (>=5.0.2)
-Requires-Dist: xnat (==0.4.3)
-Requires-Dist: click (>=7.1.2)
-Requires-Dist: requests (>=2.10.0)
-Requires-Dist: medimages4tests (>=0.3)
-Requires-Dist: PyYAML (>=6.0)
+Requires-Dist: docker >=5.0.2
+Requires-Dist: xnat ==0.4.3
+Requires-Dist: click >=7.1.2
+Requires-Dist: requests >=2.10.0
+Requires-Dist: medimages4tests >=0.3
+Requires-Dist: PyYAML >=6.0
 Provides-Extra: test
-Requires-Dist: pytest (>=5.4.3) ; extra == 'test'
-Requires-Dist: pytest-cov (>=2.12.1) ; extra == 'test'
+Requires-Dist: pytest >=5.4.3 ; extra == 'test'
+Requires-Dist: pytest-cov >=2.12.1 ; extra == 'test'
 
 Xnat4Tests
 ==========
 .. image:: https://github.com/australian-imaging-service/xnat4tests/actions/workflows/test.yml/badge.svg
    :target: https://github.com/Australian-Imaging-Service/xnat4tests/actions/workflows/test.yml
 .. image:: https://codecov.io/gh/australian-imaging-service/xnat4tests/branch/main/graph/badge.svg?token=UIS0OGPST7
    :target: https://codecov.io/gh/australian-imaging-service/xnat4tests
```

